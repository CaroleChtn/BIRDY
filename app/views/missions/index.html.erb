<div class="background_dash">
</div>

<div class="container-index" data-controller="favorites">
  <% @missions.first(6).each do |mission|  %>
    <div class="card-index my-2 mx-2">
      <div class= "card-index-image">
          <i class="fa-solid fa-heart coeur_favoris d-flex<%= Favorite.find_by(user: current_user, mission: mission) ? 'fav-red' : 'fav-black' %> " data-action="click->favorites#fav" data-favorites-mission-id-param="<%= mission.id %>"></i>
          <img src="<%= mission.img%>" alt="mission_img" class="card-img-top">
      </div>
      <div class="card-index-bot mx-2">
        <div class="card-index-text">
          <h3 class="text-left"><%= link_to mission.title, mission_path(mission) %></h3>
        </div>
        <div class="card-index-price d-flex justify-content-between">
          <div></div>
          <div class="d-flex flex-column align-items-end">
            <div class="mt-auto">
              <p><%= mission.duration%></p>
              <h4><%= mission.price%>‚Ç¨ hors a√©rien</h4>
            </div>
          </div>
        </div>
        <% mission.tags.each do |tag| %>
          <div class="badge bg-secondary"><%= tag.name %></div>
        <% end %>
        <% mission.categories.each do |category| %>
          <div class="badge bg-primary"><%= category.name %></div>
        <% end %>
      </div>
    </div>
  <%end%>
</div>

<div class="collapse container-index" id="collapseExample">
  <% @missions.last(@missions.length - 6).each do |mission| %>
    <div class="card-index my-2 mx-2">
      <div class= "card-index-image">
        <i class="fa-solid fa-heart coeur_favoris d-flex<%= Favorite.find_by(user: current_user, mission: mission) ? 'fav-red' : 'fav-black' %> " data-action="click->favorites#fav" data-favorites-mission-id-param="<%= mission.id %>"></i>
        <img src="<%= mission.img%>" alt="mission_img" class="card-img-top">
      </div>
      <div class="card-index-bot mx-2">
        <div class="card-index-text">
          <h3 class="text-left"><%= link_to mission.title, mission_path(mission) %></h3>
        </div>
        <div class="card-index-price d-flex justify-content-between">
          <div></div>
          <div class="d-flex flex-column align-items-end">
            <div class="mt-auto">
              <p><%= mission.duration%></p>
              <h4><%= mission.price%>‚Ç¨ hors a√©rien</h4>
            </div>
          </div>
        </div>
        <% mission.tags.each do |tag| %>
          <div class="badge bg-secondary"><%= tag.name %></div>
        <% end %>
        <% mission.categories.each do |category| %>
          <div class="badge bg-primary"><%= category.name %></div>
        <% end %>
      </div>
    </div>
  <%end%>
</div>

<div class="container text-center mt-5 mb-5">
  <p>
    <button class="button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
      Voir plus
    </button>
  </p>
</div>

<div class='main-container-emprunte-carbone'>
  <div class="card-emprunte-carbon text-center">
    <h4>Je voyage responsable!</h4>
    <h2>üë£Calculer mon empreinte carbone</h2>
    <h5>D√©couvez la quantit√© de CO2 que vous √©mettez par personne pour ce trajet</h5>
  </div>
</div>

<div class="mt-2">
  <script id="mon-impact-transport" src="https://monimpacttransport.fr/iframe.js" data-search="?theme=default"></script>
</div>
<div class="d-flex justify-content-center">
  <div class="left-flex-missions"></div>
  <div class="right-flex-missions w-50 my-5">
    <div style="width: 100%; height: 300px;"
      data-controller="map"
      data-map-markers-value="<%= @markers.to_json %>"
      data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
  </div>
</div>
